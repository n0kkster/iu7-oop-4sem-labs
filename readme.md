# ООП

## Лекция 1

Суть структурного программирования - разбиение задачи на атомарные функции. Нисходящий подход. Основная задача разбивается на мн-во меньших подзадач, которые в свою очередь тоже разбиваются. На нижних уровнях логика отсутствует. Логика присутствует только на верхних уровнях.

**Управление:**
```
            -----------------
            |    главная    |
            |    функция    |
            |               |
            -----------------
            /       |       \
           /        |        \
          /         |         \
         /          |          \
------------- ------------- -------------
|подфункция | |подфункция | |подфункция |
|         1 | |          2| |          3|
------------- ------------- -------------
```

- У руководителя (вызывающей функции) должно быть не более 7 подчиненных (вызывыемых функций). Нужно не допускать разрастание дерева управления в ширину.
- Глубина вложенности конструкций в функции не должна быть больше 3.
- Выход из цикла должен быть только один.
- Никаких `goto`.


**Основные принципы написания функций типа "черный ящик":**
- Проверки данных делать внутри функций. Не думать о других функциях.
- Если функция не может выполниться, она возвращает управление вызывающей функции. Не использовать `abort()`, `exit()`, `assert()`.
- Функция должна выполнять какое-то одно действие. Определение действия функции должно быть коротким, а также не включать перечисления и обороты. Оборот - проброс указания от функции выше к функции ниже.
- Не должно быть разных функций, выполняющих одно действие, а также дублирования кода.
- Параметры в функциях делятся на:
    - Входные. Обязательно инициализированы. Функция не имеет права их менять.
    - Выходные. Не должны быть инициализированы. 
    - Изменяемые. Обязательно должны быть инициализированы. Если функция не может быть выполнена, то она не должна изменять данные параметры.
- Если функция не может выполниться, она не должна захватывать ресурсы. Обязательно освободить все, что захватила. Если же функция выполнилась, то захваченные ресурсы возвращаются на верхний уровень. Вызывающая функция теперь ответственна за них.
- Все данные в функции должны быть переданы явно (то есть не использовать глобальных). Константы, которые никогда не поменяются, могут быть глобальными (например Пи, у нас не поменяется, в отличие от ~~хохлов~~ украинцев. © Тассов).
- Сокращать количество передаваемых параметров. Желательно, чтобы было не больше трех. Можно структурировать параметры.
- Необходимо передавать в функцию только то, с чем она работает. Например если есть структура на много полей, а функция работает только с несколькими из них, не стоит тащить всю структуру. Можно создать меньшую структуру. **Не работать с полями полей структуры.**
- Стараться протащить данные как можно ниже. То есть чтобы на верхних уровнях было меньше данных и были только те, которые нужны на текущем уровне.

---

## Лекция 2

**Плюсы СП:**
- Логические ошибки исправляются на ранних стадиях разработки.
- Комплексаная отладка. Подзадачи можно тестировать в составе большей задачи. Не нужно писать тесты для каждой подзадачи, нужно писать тесты на всей программы.
- Не нужно полностью выполнять проект. Проектируем -> пишем код -> тестируем и так по кругу.
- Разбиваем задачи на подзадачи. Получается иерархическая структура, уровни абстракции. Каждая функция должна быть небольшой.
- Плавное распределение ресурсов.